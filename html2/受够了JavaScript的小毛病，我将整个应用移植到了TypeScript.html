<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 9.3.4 (460189)"/><meta name="keywords" content="微信"/><meta name="created" content="2020-06-07 14:16:16 +0000"/><meta name="source-application" content="微信"/><meta name="source-url" content="https://mp.weixin.qq.com/s/wRX0cK3DYqcGqMT5TcSSuA"/><meta name="updated" content="2020-06-07 14:16:16 +0000"/><title>受够了JavaScript的小毛病，我将整个应用移植到了TypeScript</title></head><body style="margin:0px;"><div style="padding:8px 0px;margin:8px auto;max-width:700px;"> <div style="margin:0;padding:0;background-color:#fff"><div style="margin:0;padding:0"><div style="margin:0;padding:0;position:relative"><h2 style="font-weight:400;margin:0;padding:0;font-size:22px;line-height:1.4;margin-bottom:14px"> 受够了JavaScript的小毛病，我将整个应用移植到了TypeScript </h2><div style="margin:0;padding:0;margin-bottom:22px;line-height:20px;font-size:0;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto"><span style="margin:0 10px 10px 0;-webkit-tap-highlight-color:rgba(0,0,0,0);margin-right:8px;display:inline-block;vertical-align:middle;font-size:12px;line-height:1.67;background-color:#c3c3c3;border-radius:2px;-moz-border-radius:2px;-webkit-border-radius:2px;width:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;max-width:70%;background:#f2f2f2;color:rgba(0,0,0,0.3);padding:0 4px">原创</span><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);color:rgba(0,0,0,0.3)"> Gary Bernhardt </span><span style="padding:0;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);position:relative"><a style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0)"> 前端之巅 </a></span><em style="padding:0;font-style:normal;display:inline-block;vertical-align:middle;margin:0 10px 10px 0;font-size:15px;-webkit-tap-highlight-color:rgba(0,0,0,0);color:rgba(0,0,0,0.3)"/></div><div style="margin:0;padding:0;overflow:hidden;color:#333;font-size:17px;word-wrap:break-word;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;text-align:justify;position:relative;z-index:0;__visibility:hidden"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(63,63,63);font-size:16px;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left"><img src="%E5%8F%97%E5%A4%9F%E4%BA%86JavaScript%E7%9A%84%E5%B0%8F%E6%AF%9B%E7%97%85%EF%BC%8C%E6%88%91%E5%B0%86%E6%95%B4%E4%B8%AA%E5%BA%94%E7%94%A8%E7%A7%BB%E6%A4%8D%E5%88%B0%E4%BA%86TypeScript.resources/640.jpg" height="720" width="1080"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;color:rgb(145,145,145);text-align:left;line-height:1em;margin-top:13px;padding-left:14px"> 作者 | Gary Bernhardt </div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;color:rgb(145,145,145);text-align:left;line-height:1em;margin-top:13px;padding-left:14px"> 译者 | 王强 </div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;color:rgb(145,145,145);text-align:left;line-height:1em;margin-top:13px;padding-left:14px"> 策划 | 小智 </div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-size:14px">本文最初发布于 executeprogram 网站，经网站授权由 InfoQ 中文站翻译并分享。这篇译文是第三方翻译版本，未经原文作者审核。</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">Beta 版的 Execute Program 是用 Ruby 和 JavaScript 编写的。之后，我们分几步将整个应用完全移植到了 TypeScript 上。本文介绍的是移植的第一步，也就是前端的部分。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">在 Execute Program 的原始 JavaScript 前端中，我经常会犯一些小错误。例如，我会将错误的 prop 名称传递给 React 组件，或者遗漏某个 prop，抑或传递错误的数据类型。（Prop 是作为参数发送到 React 组件的数据。组件将一些 props 传递给自己的某个子组件，以此类推，这是很常见的。）</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">对于像 JavaScript 和 Ruby 这样的动态语言来说，这不是个小问题。过去 15 年来我一直在学习该如何应对这种错误问题。我在之前谈论的是 2011 年代的情况，其中讨论的缓解措施确实有些用途，但它们无法随着系统的发展顺利地扩展下去，而且我们忘掉它们时也没有安全网可用。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-size:14px">https://www.destroyallsoftware.com/screencasts/catalog/how-and-why-to-avoid-nil</span></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">我觉得 15 年时间已经够长了；我想回到静态类型系统的怀抱，毕竟这种系统中根本不会出现这类错误。彼时我们有几个选项：Elm、Reason、Flow、TypeScript 和 PureScript。（这里举了一部分例子。）最后我决定使用 TypeScript 是因为：</p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:decimal"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em">TypeScript 是 JavaScript 的超集，因此移植起来很容易。移植回来也更容易些：只需删除类型定义即可，然后我们又回到了 JavaScript。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em">TypeScript 编译器使用 TypeScript 编写，并作为已编译的 JavaScript 代码分发，因此我们可以在自己的 Web 应用中运行它。我们的 TypeScript 课程正是这样做的：在浏览器中评估用户的 TypeScript 代码，以避免网络延迟。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;color:rgb(136,136,136)">https://www.executeprogram.com/courses/typescript/lessons/basic-types</span></p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">这一条是我们的业务特有的：TypeScript 比其他选项更受欢迎。这意味着更多的人希望从像我们这样的课程中学习 TypeScript。用 TypeScript 编写 Execute Program，让我们可以制作出更好的 TypeScript 课程。</p></li></ol><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">在 2018 年 10 月，我们用了大约两天时间将前端 JavaScript 代码移植到了 TypeScript。下面的图表显示了在移植前和移植后每种语言拥有的代码量。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em"><img src="%E5%8F%97%E5%A4%9F%E4%BA%86JavaScript%E7%9A%84%E5%B0%8F%E6%AF%9B%E7%97%85%EF%BC%8C%E6%88%91%E5%B0%86%E6%95%B4%E4%B8%AA%E5%BA%94%E7%94%A8%E7%A7%BB%E6%A4%8D%E5%88%B0%E4%BA%86TypeScript.resources/640_1.png" height="808" width="1058"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em">当时我们还是 pre-beta 版本，所以系统还很小，只有大约 6,000 行。这张图上没有涉及移植后的情况；我们将在以后的文章中具体介绍相关内容。</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;margin-bottom:15px">在这次移植之后，React prop 问题消失了。下面我们会看几个示例，首先是一个简单的例子。以下是渲染“Continue”按钮的代码，这个按钮出现在我们课程的每个文本段落之后：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:144px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:43px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">Button</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:65px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">autofocus</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">{true}</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">icon</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:87px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"arrowRight"</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:51px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">onClick</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:72px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">{continue}</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:51px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">primary</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>&gt;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  Continue<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:65px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">Button</span>&gt;</span></code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">这个 Button 组件的 props 的类型如下所示。当读取诸如 autofocus?: boolean 之类的属性类型时：“autofocus”是属性的名称；“?”表示它是可选的；“:”将属性名称与其类型分开；而“boolean”是类型。最后一个属性类型 onClick 表示“一个不带参数且不返回任何内容的函数”。如果你不熟悉 TypeScript 的函数类型语法，可以在我们的课程中全面了解 TypeScript 的函数类型：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left;margin-bottom:20px"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-size:14px">https://www.executeprogram.com/courses/typescript/lessons/function-types</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">type</span> ButtonProps = {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  autofocus?: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:50px;text-decoration:none solid rgb(230,192,123);font-weight:400;font-style:normal">boolean</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  icon?: IconName<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  primary?: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:51px;text-decoration:none solid rgb(230,192,123);font-weight:400;font-style:normal">boolean</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  onClick: <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:36px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:15px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">()</span> =&gt;</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:28px;text-decoration:none solid rgb(230,192,123);font-weight:400;font-style:normal">void</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}</code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">如果将“autofocus”prop 从 true 更改为 1，会发生什么？现在，我们在类型系统期望一个布尔值的地方传递了一个数字值。不到一秒钟后，编译器将在下面显示错误。（这里删除了一些不相关的细节；本系列文章中所有涉及到错误的地方都会这样处理。）<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap">src/client/components/explanation.tsx(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:15px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">13</span>,<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">27</span>):<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  error: Type <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:58px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">'number'</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:14px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">is</span> not assignable <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:14px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">to</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(230,192,123);font-weight:400;font-style:normal">type</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:152px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">'boolean | undefined'</span>.</code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em">有害代码在 vim 中也变成了红色。修好它后，红色消失了。解决错误只需要几秒钟。在 Ruby 或 JavaScript 中，我可能会花几分钟的时间手动测试应用程序，并反复浏览它的状态才能知道到底发生了什么事情。我也可以依靠自动化测试，但是我们在另一篇文章中介绍了测试 vs 类型的问题。<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;color:rgb(136,136,136)">https://www.executeprogram.com/blog/are-tests-necessary-in-typescript</span></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;margin-bottom:15px">这个整数到布尔的更改是对类型系统的一次简单而低风险的测试。Button 的 icon 属性显示了更高级的用法。下面还是 Button 调用：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:144px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:43px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">Button</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:65px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">autofocus</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">{true}</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">icon</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:87px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"arrowRight"</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:51px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">onClick</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:72px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">{continue}</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:51px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">primary</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>&gt;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  Continue<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:65px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">Button</span>&gt;</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left;margin-bottom:15px">看起来 icon prop 只是一个字符串：“arrowRight”。在运行时，在已编译的 JavaScript 代码中，它将是一个字符串。但是在上面显示的 ButtonProps 类型中，我们将其定义为 IconName，后者是在其他地方定义的。在查看其定义之前，让我们先看看这个类型的作用。假设我们将“icon”prop 更改为“banana”。我们实际上没有名为“banana”的图标。<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:144px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:43px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">Button</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:65px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">autofocus</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">{true}</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">icon</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:58px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"banana"</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:51px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">onClick</span>=<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:72px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">{continue}</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:51px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">primary</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>&gt;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  Continue<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:65px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">Button</span>&gt;</span></code></pre></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left;margin-bottom:15px">不到一秒钟后，TypeScript 编译器拒绝了这一更改：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap">src/client/components/explanation.tsx(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:15px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">13</span>,<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">44</span>):<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  error: Type <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:72px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">'"banana"'</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:15px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">is</span> not assignable <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:15px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">to</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(230,192,123);font-weight:400;font-style:normal">type</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:476px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">'"menu" | "arrowDown" | "arrowLeft" | ... 21 more ... | undefined'</span>.</code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">编译器说“icon”不能是任意字符串。它必须是我们定义为 icon 名称的 24 个字符串之一。编译器将拒绝任何使我们引用不存在图标的更改；这不是有效的程序，甚至无法开始执行。<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left;margin-bottom:15px">有多种方法可以实现 IconName 类型。一种是编写一种类型，该类型显式列出所有可能的 icon 名称。然后，我们必须使 icon 名称与其在磁盘上的图像文件保持同步。这种类型可能是这样的：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(230,192,123);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(230,192,123);font-weight:400;font-style:normal">type</span> IconName =<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"menu"</span> |<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:80px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"arrowDown"</span> |<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:80px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"arrowLeft"</span> |<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:87px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"arrowRight"</span> |<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  ...</code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">翻译成中文：“这里会静态地保证 IconName 类型的一个值是此处指定的字符串之一，但不能是其他任何字符串。”（这个类型是我们两堂课程涵盖的两个主题的组合：字面量类型和类型联合）<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left;margin-bottom:15px">我们的 IconName 未被定义为字面量类型的简单联合。让图标名称列表与文件列表保持同步是很无聊的工作，我们可以让计算机来完成它！相反，我们的 icon.tsx 文件如下所示：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap">export const icons = {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  arrowDown: {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    labe<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">l:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:87px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"Down Arrow"</span>,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    data() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:43px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">return</span> &lt;path ... /&gt;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  },<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  arrowLef<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">t:</span> {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    labe<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(209,154,102);background:rgba(0,0,0,0);display:inline;width:14px;text-decoration:none solid rgb(209,154,102);font-weight:400;font-style:normal">l:</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(152,195,121);background:rgba(0,0,0,0);display:inline;width:87px;text-decoration:none solid rgb(152,195,121);font-weight:400;font-style:normal">"Left Arrow"</span>,<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    data() {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>      <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:43px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">return</span> &lt;path ... /&gt;<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    }<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  },<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  ...<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}</code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">实际的 SVG&lt;path/&gt;标签就在源代码中，在以 icon 名称为键的对象中。（也可以在不将 SVG 内联到源文件中的情况下执行此操作。例如，我们可以使用一些 Webpack 技巧将图像保存在它们自己的文件中，但仍然可以确保列表中的每个图标也都存在于磁盘上。到目前为止，这种简单的解决方案对我们来说是很好用的。）<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left;margin-bottom:15px">通过这种方式定义 icon 后，我们可以使用一行代码自动提取其名称的联合类型（union type）：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:43px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">export</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">type</span> IconName = keyof <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">typeof</span> icons</code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em">（这里的意思是，你可以认为该类型表示“每当某物的类型为”IconName”时，它必须是与 icons 对象的键之一匹配的字符串。）<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;margin-bottom:15px">这样就搞定了；并不需要其他类型层面的工作。剩下的代码只是一个简单的 Icon React 组件，它在列表中查找图标并返回其 SVG 路径。这个函数中没有明确的 TypeScript 类型。它看起来像是纯粹的 JavaScript 代码，但它也经过了类型检查。这是一个最小版本，其中删除了所有无关的细节：<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></div><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><pre style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin:0;padding:0;border-radius:none;background:none"><code style="max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;border-radius:4px;font-size:0.85em;margin:0 0.15em;background:rgb(40,44,52);color:rgb(171,178,191);display:block;padding:5.95px;overflow-x:auto;white-space:nowrap"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:43px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">export</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:210px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:58px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">function</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(97,174,238);background:rgba(0,0,0,0);display:inline;width:29px;text-decoration:none solid rgb(97,174,238);font-weight:400;font-style:normal">Icon</span>(<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:210px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">props: {<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  name: IconName<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}</span>) </span>{<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(198,120,221);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(198,120,221);font-weight:400;font-style:normal">return</span> <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:36px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:22px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">svg</span>&gt;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>    {icons[props.name].data()}<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>  <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(171,178,191);background:rgba(0,0,0,0);display:inline;width:44px;text-decoration:none solid rgb(171,178,191);font-weight:400;font-style:normal">&lt;/<span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(224,108,117);background:rgba(0,0,0,0);display:inline;width:21px;text-decoration:none solid rgb(224,108,117);font-weight:400;font-style:normal">svg</span>&gt;</span><br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/>}</code></pre></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">现在，我们可以将 SVG 标签放入这个源文件中，并将新 icon 拖放到“icons”列表中。当我们这样做时，这个 icon 就可以在 Button 组件，以及系统内接受 icon 名称的其他任何部分中使用。如果我们从列表中删除一个 icon，则系统中引用该 icon 的所有部分都将立即无法编译，从而确保没有过时的 icon 引用在运行时导致错误。<br style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"/></p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">这些示例按照静态类型标准来说是很简单的，但我认为它们证明了 Web 应用程序中有多少可以轻松实现的改进之处。一个应用程序中的大多数代码都不涉及高级类型系统功能；多数需求仅仅是“确保我们传递正确的 props”和“确保我们的图标确实存在”之类的简单事情。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">我们在整个系统中都做了这种事情。其他的一些示例：</p><ol style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;padding-left:2.2em;list-style-type:decimal"><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">我们在整个系统中使用了一个 Note 组件。它具有一个 tone prop 来确定提示的样式：“info”“warning”“error”等。如果我们不再使用其中某个 tone 选项，则我们将从联合类型中将其删除，并且所有引用这个 tone 的 Note 将出错，直到我们更新它们。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">我们链接到的每个 URL 都将静态保证存在。当我们重命名或删除 URL 时，链接到它的每个组件都无法编译，直到我们对其进行更新以匹配为止。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">当我们链接到这些 URL 时，类型系统可确保我们填充 URL 中的所有空缺。例如，路径“/courses/:courseId/lessons/:lessonId”具有两个 hole，“courseId”和“lessonId”。如果我们尝试链接到该路径，但忘记提供“courseId”，则代码将无法编译。</p></li><li style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important"><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">我们在客户端上发出的每个 API 请求都会被静态确保与相应服务端 API 端点的负载结构匹配。如果我们在端点中重命名一个属性，哪怕属性在嵌套的 API 对象的内部深处，引用该端点属性的任何代码也都将无法编译，直到我们对其更新以匹配为止。我们在另一篇文章中介绍了细节：</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(136,136,136);font-size:14px">https://www.executeprogram.com/blog/porting-to-typescript-solved-our-api-woes</span></p></li></ol><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">诸如此类的问题经常会出现在编程工作中，尤其是在动态语言中非常常见；但我们无需编写任何自动测试，也用不着什么手动测试，就可以从静态上避免这些问题。有些问题解决起来需要费些功夫。我们的 API 路由器验证写起来很麻烦。但是写多了就顺手了。上面的单行“IconName”类型实际上是问题的完整解决方案。如果将其复制到 TypeScript 文件中，它就能起作用。</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em;text-align:left">将我们的前端代码移植到 TypeScript 仅仅是个开始。那之后，我们又将后端从 Ruby 移植到了 TypeScript，然后在移植后的 9 个月内对其进行了扩展和维护。</p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;text-align:left;margin-top:30px;margin-left:8px;color:rgb(60,112,198)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;display:inline-block;width:15px;height:15px;margin-right:10px;background-image:url(https://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUhiaZbw0a6sjf66eB7IrnbrWuOetibc0828hYF0Qsu94Ysp0TYFEpKibfibfaRyF3WgRwiaHzaZ4Z87Fw/640?wx_fmt=png);background-position:center center;background-repeat:no-repeat;background-attachment:initial;background-origin:initial;background-clip:initial;background-size:100% 100%"/> 延伸阅读 </div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;white-space:pre-line;padding-top:23px;padding-right:8px;padding-left:8px;color:rgb(74,74,74);line-height:1.75em"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;font-size:14px;color:rgb(136,136,136)">https://www.executeprogram.com/blog/porting-a-react-frontend-to-typescript</span></p><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(63,63,63);font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:16px;white-space:normal"><div style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-top:30px;margin-left:8px;text-align:left;color:rgb(60,112,198)"><span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;margin-right:10px;display:inline-block;width:15px;height:15px;background-image:url(https://mmbiz.qpic.cn/mmbiz_png/XIibZ0YbvibkUcHVBEicsennibhMHgURnl1OUUH5WfNH4DgoibqrMV4SvCwBbsufmKL8ibPNDWiaTemIfYAHKTKIEwpYw/640?wx_fmt=png);background-position:center center;background-repeat:no-repeat;background-attachment:initial;background-origin:initial;background-clip:initial;background-size:100% 100%"/> 活动推荐</div></div><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;padding-top:23px;padding-right:8px;padding-left:8px;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:16px;white-space:pre-line;color:rgb(74,74,74);line-height:1.75em;text-align:left"><strong style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important">GMTC 全球大前端技术大会（北京站）2020</strong> 关注前端、移动、AI 应用等多个技术领域，大会聚焦前沿技术及实践经验，旨在帮助参会者了解大前端 &amp; 移动开发领域的技术趋势与实践案例。大会目前 <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(255,0,0)">8</span> 折优惠报名，限时立减 <span style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;color:rgb(255,0,0)">960 元</span>！了解更多大会内容，可扫描下图二维码或点击【阅读原文】。联系票务经理鱼丸：13269078023（同微信）</p><p style="margin:0;padding:0;max-width:100% !important;box-sizing:border-box !important;-webkit-box-sizing:border-box !important;word-wrap:break-word !important;clear:both;min-height:1em;padding-top:23px;padding-right:8px;padding-left:8px;font-family:Avenir,-apple-system-font,微软雅黑,sans-serif;font-size:16px;white-space:pre-line;color:rgb(74,74,74);line-height:1.75em;text-align:left"><img src="%E5%8F%97%E5%A4%9F%E4%BA%86JavaScript%E7%9A%84%E5%B0%8F%E6%AF%9B%E7%97%85%EF%BC%8C%E6%88%91%E5%B0%86%E6%95%B4%E4%B8%AA%E5%BA%94%E7%94%A8%E7%A7%BB%E6%A4%8D%E5%88%B0%E4%BA%86TypeScript.resources/640.png" height="500" width="900"/></p></div></div></div><ul style="margin:0;padding:0"/><div style="margin:0;padding:0;padding-top:15px;overflow:hidden;line-height:32px;font-size:15px"><div style="margin:0;padding:0;display:flex"><div style="margin:0;padding:0;-webkit-box-flex:1;-webkit-flex:1;flex:1"><a href="https://mp.weixin.qq.com/s/wRX0cK3DYqcGqMT5TcSSuA##" style="margin:0;padding:0;color:#576b95;text-decoration:none;-webkit-tap-highlight-color:rgba(0,0,0,0);float:left;margin-right:16px">阅读原文</a></div><span style="margin:0;padding:0;float:right;margin-left:16px;color:#576b95;__visibility:hidden"><span style="margin:0;-webkit-appearance:none;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0;background-color:transparent;border:0;display:inline-block;vertical-align:middle;white-space:nowrap;padding:0;font-size:15px;font-family:inherit;line-height:2.13333333;color:#576b95"><span style="margin:0;padding:0">在看</span><span style="margin:0;padding:0;font-size:15px;margin-left:.2em"/></span></span></div></div></div></div></div></body></html>